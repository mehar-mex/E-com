{"ast":null,"code":"import { createSlice, createAsyncThunk } from '@reduxjs/toolkit';\nimport axios from 'axios';\nexport const addToCart = createAsyncThunk('cart/addToCart', async (item, {\n  getState\n}) => {\n  const {\n    auth\n  } = getState();\n  const config = {\n    headers: {\n      Authorization: `Bearer ${auth.token}`\n    }\n  };\n  const response = await axios.post('/api/cart/add', item, config);\n  return response.data;\n});\nexport const fetchCart = createAsyncThunk('cart/fetchCart', async (_, {\n  getState\n}) => {\n  const {\n    auth\n  } = getState();\n  const config = {\n    headers: {\n      Authorization: `Bearer ${auth.token}`\n    }\n  };\n  const response = await axios.get('/api/cart', config);\n  return response.data;\n});\nexport const updateQuantity = createAsyncThunk('cart/updateQuantity', async ({\n  productId,\n  quantity\n}, {\n  getState\n}) => {\n  const {\n    auth\n  } = getState();\n  const config = {\n    headers: {\n      Authorization: `Bearer ${auth.token}`\n    }\n  };\n  const response = await axios.put('/api/cart/update', {\n    productId,\n    quantity\n  }, config);\n  return response.data;\n});\nexport const removeFromCart = createAsyncThunk('cart/removeFromCart', async (productId, {\n  getState\n}) => {\n  const {\n    auth\n  } = getState();\n  const config = {\n    headers: {\n      Authorization: `Bearer ${auth.token}`\n    }\n  };\n  const response = await axios.delete(`/api/cart/remove/${productId}`, config);\n  return response.data;\n});\nconst cartSlice = createSlice({\n  name: 'cart',\n  initialState: {\n    items: [],\n    loading: false,\n    error: null\n  },\n  reducers: {\n    clearCart: state => {\n      state.items = [];\n    }\n  },\n  extraReducers: builder => {\n    builder.addCase(addToCart.fulfilled, (state, action) => {\n      state.items = action.payload;\n    }).addCase(fetchCart.fulfilled, (state, action) => {\n      state.items = action.payload;\n    }).addCase(updateQuantity.fulfilled, (state, action) => {\n      state.items = action.payload;\n    }).addCase(removeFromCart.fulfilled, (state, action) => {\n      state.items = action.payload;\n    });\n  }\n});\nexport const {\n  clearCart\n} = cartSlice.actions;\nexport default cartSlice.reducer;","map":{"version":3,"names":["createSlice","createAsyncThunk","axios","addToCart","item","getState","auth","config","headers","Authorization","token","response","post","data","fetchCart","_","get","updateQuantity","productId","quantity","put","removeFromCart","delete","cartSlice","name","initialState","items","loading","error","reducers","clearCart","state","extraReducers","builder","addCase","fulfilled","action","payload","actions","reducer"],"sources":["D:/E-commerce/Structured/Frontend/src/store/cartSlice.js"],"sourcesContent":["import { createSlice, createAsyncThunk } from '@reduxjs/toolkit';\nimport axios from 'axios';\n\nexport const addToCart = createAsyncThunk(\n  'cart/addToCart',\n  async (item, { getState }) => {\n    const { auth } = getState();\n    const config = {\n      headers: { Authorization: `Bearer ${auth.token}` }\n    };\n    const response = await axios.post('/api/cart/add', item, config);\n    return response.data;\n  }\n);\n\nexport const fetchCart = createAsyncThunk(\n  'cart/fetchCart',\n  async (_, { getState }) => {\n    const { auth } = getState();\n    const config = {\n      headers: { Authorization: `Bearer ${auth.token}` }\n    };\n    const response = await axios.get('/api/cart', config);\n    return response.data;\n  }\n);\n\nexport const updateQuantity = createAsyncThunk(\n  'cart/updateQuantity',\n  async ({ productId, quantity }, { getState }) => {\n    const { auth } = getState();\n    const config = {\n      headers: { Authorization: `Bearer ${auth.token}` }\n    };\n    const response = await axios.put('/api/cart/update', { productId, quantity }, config);\n    return response.data;\n  }\n);\n\nexport const removeFromCart = createAsyncThunk(\n  'cart/removeFromCart',\n  async (productId, { getState }) => {\n    const { auth } = getState();\n    const config = {\n      headers: { Authorization: `Bearer ${auth.token}` }\n    };\n    const response = await axios.delete(`/api/cart/remove/${productId}`, config);\n    return response.data;\n  }\n);\n\nconst cartSlice = createSlice({\n  name: 'cart',\n  initialState: {\n    items: [],\n    loading: false,\n    error: null,\n  },\n  reducers: {\n    clearCart: (state) => {\n      state.items = [];\n    },\n  },\n  extraReducers: (builder) => {\n    builder\n      .addCase(addToCart.fulfilled, (state, action) => {\n        state.items = action.payload;\n      })\n      .addCase(fetchCart.fulfilled, (state, action) => {\n        state.items = action.payload;\n      })\n      .addCase(updateQuantity.fulfilled, (state, action) => {\n        state.items = action.payload;\n      })\n      .addCase(removeFromCart.fulfilled, (state, action) => {\n        state.items = action.payload;\n      });\n  },\n});\n\nexport const { clearCart } = cartSlice.actions;\nexport default cartSlice.reducer;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}